From: Stefan Hajnoczi <stefanha@gmail.com>
Date: Sat, 10 Dec 2011 02:12:30 +0100
Subject: [015/106] staging: line6: eliminate useless NULL checks

commit 188e664502dc47f83775a556e6db52cd8cc0b5fc upstream.

The line6 driver checks struct field addresses for NULL where it does
not make sense to do so.  The struct has already been checked for NULL
and there is no value in checking the first field's address too.

Suggested-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Stefan Hajnoczi <stefanha@gmail.com>
Signed-off-by: Markus Grabner <grabner@icg.tugraz.at>
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---
 drivers/staging/line6/pod.c      |    6 +-----
 drivers/staging/line6/podhd.c    |    6 +-----
 drivers/staging/line6/toneport.c |    6 +-----
 drivers/staging/line6/variax.c   |    6 +-----
 4 files changed, 4 insertions(+), 20 deletions(-)

Index: linux-3.2.46/drivers/staging/line6/pod.c
===================================================================
--- linux-3.2.46.orig/drivers/staging/line6/pod.c	2013-07-26 18:52:59.000000000 +0000
+++ linux-3.2.46/drivers/staging/line6/pod.c	2013-07-26 19:28:17.000000000 +0000
@@ -1149,14 +1149,10 @@
 static void pod_destruct(struct usb_interface *interface)
 {
 	struct usb_line6_pod *pod = usb_get_intfdata(interface);
-	struct usb_line6 *line6;
 
 	if (pod == NULL)
 		return;
-	line6 = &pod->line6;
-	if (line6 == NULL)
-		return;
-	line6_cleanup_audio(line6);
+	line6_cleanup_audio(&pod->line6);
 
 	del_timer(&pod->startup_timer);
 	cancel_work_sync(&pod->startup_work);
Index: linux-3.2.46/drivers/staging/line6/podhd.c
===================================================================
--- linux-3.2.46.orig/drivers/staging/line6/podhd.c	2013-07-26 19:27:59.000000000 +0000
+++ linux-3.2.46/drivers/staging/line6/podhd.c	2013-07-26 19:28:17.000000000 +0000
@@ -80,14 +80,10 @@
 static void podhd_destruct(struct usb_interface *interface)
 {
 	struct usb_line6_podhd *podhd = usb_get_intfdata(interface);
-	struct usb_line6 *line6;
 
 	if (podhd == NULL)
 		return;
-	line6 = &podhd->line6;
-	if (line6 == NULL)
-		return;
-	line6_cleanup_audio(line6);
+	line6_cleanup_audio(&podhd->line6);
 }
 
 /*
Index: linux-3.2.46/drivers/staging/line6/toneport.c
===================================================================
--- linux-3.2.46.orig/drivers/staging/line6/toneport.c	2013-07-26 18:52:59.000000000 +0000
+++ linux-3.2.46/drivers/staging/line6/toneport.c	2013-07-26 19:28:17.000000000 +0000
@@ -295,14 +295,10 @@
 static void toneport_destruct(struct usb_interface *interface)
 {
 	struct usb_line6_toneport *toneport = usb_get_intfdata(interface);
-	struct usb_line6 *line6;
 
 	if (toneport == NULL)
 		return;
-	line6 = &toneport->line6;
-	if (line6 == NULL)
-		return;
-	line6_cleanup_audio(line6);
+	line6_cleanup_audio(&toneport->line6);
 }
 
 /*
Index: linux-3.2.46/drivers/staging/line6/variax.c
===================================================================
--- linux-3.2.46.orig/drivers/staging/line6/variax.c	2013-07-26 18:52:59.000000000 +0000
+++ linux-3.2.46/drivers/staging/line6/variax.c	2013-07-26 19:28:17.000000000 +0000
@@ -572,14 +572,10 @@
 static void variax_destruct(struct usb_interface *interface)
 {
 	struct usb_line6_variax *variax = usb_get_intfdata(interface);
-	struct usb_line6 *line6;
 
 	if (variax == NULL)
 		return;
-	line6 = &variax->line6;
-	if (line6 == NULL)
-		return;
-	line6_cleanup_audio(line6);
+	line6_cleanup_audio(&variax->line6);
 
 	del_timer(&variax->startup_timer1);
 	del_timer(&variax->startup_timer2);
