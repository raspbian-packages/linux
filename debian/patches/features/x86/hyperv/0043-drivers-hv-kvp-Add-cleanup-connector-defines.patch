From: "K. Y. Srinivasan" <kys@microsoft.com>
Date: Fri, 27 Jan 2012 15:55:57 -0800
Subject: [PATCH 43/77] drivers: hv: kvp: Add/cleanup connector defines

commit 4f03a2c934894f30a64d397df8c7c4de129c5b30 upstream.

The current KVP code carries some private connector related defines.
Update connector.h to have all the KVP defines. As part of this patch
get rid of some unused defines.

Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
Signed-off-by: Haiyang Zhang <haiyangz@microsoft.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
---
 drivers/hv/hv_kvp.h       |    3 ---
 include/linux/connector.h |    1 +
 tools/hv/hv_kvp_daemon.c  |    4 ----
 3 files changed, 1 insertion(+), 7 deletions(-)

Index: linux-3.2.46/drivers/hv/hv_kvp.h
===================================================================
--- linux-3.2.46.orig/drivers/hv/hv_kvp.h	2013-07-26 18:56:04.000000000 +0000
+++ linux-3.2.46/drivers/hv/hv_kvp.h	2013-07-26 19:18:51.000000000 +0000
@@ -107,9 +107,6 @@
  * the KVP user-mode component.
  */
 
-#define CN_KVP_VAL             0x1 /* This supports queries from the kernel */
-#define CN_KVP_USER_VAL       0x2 /* This supports queries from the user */
-
 enum hv_ku_op {
 	KVP_REGISTER = 0, /* Register the user mode component */
 	KVP_KERNEL_GET, /* Kernel is requesting the value */
Index: linux-3.2.46/include/linux/connector.h
===================================================================
--- linux-3.2.46.orig/include/linux/connector.h	2013-07-26 18:56:04.000000000 +0000
+++ linux-3.2.46/include/linux/connector.h	2013-07-26 19:18:52.000000000 +0000
@@ -43,6 +43,7 @@
 #define CN_IDX_DRBD			0x8
 #define CN_VAL_DRBD			0x1
 #define CN_KVP_IDX			0x9	/* HyperV KVP */
+#define CN_KVP_VAL			0x1	/* queries from the kernel */
 
 #define CN_NETLINK_USERS		10	/* Highest index + 1 */
 
Index: linux-3.2.46/tools/hv/hv_kvp_daemon.c
===================================================================
--- linux-3.2.46.orig/tools/hv/hv_kvp_daemon.c	2013-07-26 18:56:04.000000000 +0000
+++ linux-3.2.46/tools/hv/hv_kvp_daemon.c	2013-07-26 19:18:52.000000000 +0000
@@ -40,15 +40,11 @@
 #include <syslog.h>
 
 /*
- * KYS: TODO. Need to register these in the kernel.
  *
  * The following definitions are shared with the in-kernel component; do not
  * change any of this without making the corresponding changes in
  * the KVP kernel component.
  */
-#define CN_KVP_IDX		0x9     /* MSFT KVP functionality */
-#define CN_KVP_VAL		0x1 /* This supports queries from the kernel */
-#define CN_KVP_USER_VAL		0x2 /* This supports queries from the user  */
 
 /*
  * KVP protocol: The user mode component first registers with the
