commit a9d4e49ac9ffdc8cef37485d72f894385486309a
Author: Dom Cobley <dc4@broadcom.com>
Date:   Sun Feb 12 20:27:35 2012 +0000

    Add config option to enable L2 cache
    
    Signed-off-by: Dom Cobley <dc4@broadcom.com>

Index: linux-3.2.46/arch/arm/mach-bcm2708/Kconfig
===================================================================
--- linux-3.2.46.orig/arch/arm/mach-bcm2708/Kconfig	2013-07-26 19:31:51.000000000 +0000
+++ linux-3.2.46/arch/arm/mach-bcm2708/Kconfig	2013-07-26 19:32:14.000000000 +0000
@@ -22,4 +22,11 @@
         help
           Helper for videocore memory access and total size allocation.	   
 
+config BCM2708_L2CACHE
+	bool "Videocore L2 cache"
+	depends on MACH_BCM2708
+        default n
+        help
+          Allow ARM to use GPU's L2 cache. Requires enable_l2cache in config.txt.
+
 endmenu
Index: linux-3.2.46/arch/arm/mach-bcm2708/include/mach/memory.h
===================================================================
--- linux-3.2.46.orig/arch/arm/mach-bcm2708/include/mach/memory.h	2013-07-26 19:31:51.000000000 +0000
+++ linux-3.2.46/arch/arm/mach-bcm2708/include/mach/memory.h	2013-07-26 19:32:14.000000000 +0000
@@ -34,7 +34,12 @@
  */
 #define PHYS_OFFSET	 UL(0x00000000)
 #define ARMMEM_OFFSET    UL(0x00000000)   /* offset in VC of ARM memory */
-#define _REAL_BUS_OFFSET UL(0xC0000000)   /* don't use L1 or L2 caches */
+
+#ifdef CONFIG_BCM2708_L2CACHE
+ #define _REAL_BUS_OFFSET UL(0x40000000)   /* use L2 cache */
+#else
+ #define _REAL_BUS_OFFSET UL(0xC0000000)   /* don't use L1 or L2 caches */
+#endif
 
 /* We're using the memory at 64M in the VideoCore for Linux - this adjustment
  * will provide the offset into this area as well as setting the bits that
