From: Ben Hutchings <ben@decadent.org.uk>
Date: Thu, 13 Oct 2016 00:05:23 +0100
Subject: gro: Fix ABI change for CVE-2016-7039 fix
Forwarded: not-needed

The fix for CVE-2016-7039 (unbounded recursion in GRO) added a 4-bit
bitfield in struct napi_gro_cb where there used to be padding, so
the structure layout hasn't changed.

In case of a version mismatch between kernel and modules, two things
could go wrong, but they are not disastrous:

- the recursion count is not incremented and checked when it should
  be, so the fix is incomplete - no worse than before
- the recursion count is not reset, so GRO is not effective - only
  a performance problem

So hide this change from genksyms.

---
--- a/include/linux/netdevice.h
+++ b/include/linux/netdevice.h
@@ -2114,8 +2114,10 @@ struct napi_gro_cb {
 	/* Used to determine if flush_id can be ignored */
 	u8	is_atomic:1;
 
+#ifndef __GENKSYMS__
 	/* Number of gro_receive callbacks this packet already went through */
 	u8 recursion_counter:4;
+#endif
 
 	/* 1 bit hole */
 
